
;(function($) {
    'use strict';

    // æ’ä»¶é»˜è®¤é…ç½®
    const defaults = {
        inputTarget: null,  // è¾“å…¥ç›®æ ‡å…ƒç´ 
        position: 'bottom',  // å¼¹å‡ºä½ç½®ï¼šbottom, top, left, right
        onSelect: null,  // é€‰æ‹©è¡¨æƒ…åçš„å›è°ƒå‡½æ•°
    };

    class EmojiPicker {
        constructor(element, options) {
            this.element = element;
            this.settings = $.extend({}, defaults, options);
            this.recentEmojis = {
                'ğŸ˜Š': new Set(),  // è¡¨æƒ…ç¬¦å·çš„æœ€è¿‘ä½¿ç”¨
                ';-)': new Set(), // é¢œæ–‡å­—çš„æœ€è¿‘ä½¿ç”¨ 
                'Î©': new Set()    // ç¬¦å·çš„æœ€è¿‘ä½¿ç”¨
            };
            this.init();
        }

        // å¸¸é‡æ•°æ®
        static get CATEGORIES() {
            return {
                'ğŸ˜Š': [
                    'ğŸ•',      // æ—¶é’Ÿå›¾æ ‡ä»£è¡¨"æœ€è¿‘ä½¿ç”¨"
                    'ğŸ˜Š',      // ç¬‘è„¸å›¾æ ‡ä»£è¡¨"ç¬‘è„¸å’ŒåŠ¨ç‰©"
                    'ğŸ‘©',      // å¥³æ€§å›¾æ ‡ä»£è¡¨"äºº"
                    'ğŸˆ',      // æ°”çƒå›¾æ ‡ä»£è¡¨"åº†ç¥å’Œç‰©å“"
                    'ğŸ•',      // é£Ÿï¿½ï¿½å›¾æ ‡ä»£è¡¨"é£Ÿå“å’Œæ¤ç‰©"
                    'ğŸš—',      // æ±½è½¦å›¾æ ‡ä»£è¡¨"äº¤é€šå’Œåœ°ç‚¹"
                    'â™¡'       // ç©ºå¿ƒçˆ±å¿ƒå›¾æ ‡ä»£è¡¨"çˆ±å¿ƒ"
                ],
                ';-)': ['ğŸ•', ':D', ':)', '(^o^)', ':(', '>:(', ':|', ':O'],
                'Î©': ['ğŸ•', 'ğŸ“', 'â‘ ', 'âš¡', 'â—', 'â•', 'â¬›', 'Î©']
            };
        }

        static get TAB_MAPPING() {
            return {
                'ğŸ˜Š': 'è¡¨æƒ…ç¬¦å·',
                ';-)': 'é¢œæ–‡å­—',
                'Î©': 'ç¬¦å·'
            };
        }

        static get SECONDARY_TAB_MAPPING() {
            return {
                'ğŸ•': 'æœ€è¿‘ä½¿ç”¨',
                'ğŸ˜Š': 'ç¬‘è„¸å’ŒåŠ¨ç‰©',
                'ğŸ‘©': 'äºº',
                'ğŸˆ': 'åº†ç¥å’Œç‰©å“',
                'ğŸ•': 'é£Ÿå“å’Œæ¤ç‰©',
                'ğŸš—': 'äº¤é€šå’Œåœ°ç‚¹',
                'â™¡': 'çˆ±å¿ƒ',
                
                ':D': 'å¼€å¿ƒ',
                ':)': 'é—®å€™',
                '(^o^)': 'å–èŒ',
                ':(': 'å¿§ä¼¤',
                '>:(': 'ç”Ÿæ°”',
                ':|': 'æ— è¯­',
                ':O': 'æƒŠè®¶',
                
                'ğŸ“': 'å•ä½',
                'â‘ ': 'åºå·',
                'âš¡': 'ç‰¹æ®Šç¬¦å·',
                'â—': 'æ ‡ç‚¹ç¬¦å·',
                'â•': 'æ•°å­¦',
                'â¬›': 'å‡ ä½•',
                'Î©': 'å­—æ¯'
            };
        }

        static get EMOJI_DATA() {
            return {
                'ç¬‘è„¸å’ŒåŠ¨ç‰©': [
                    // ç¬¬ä¸€è¡Œ
                    'ğŸ˜€', 'ğŸ˜', 'ğŸ˜‚', 'ğŸ¤£', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜…', 'ğŸ˜†',
                    // ç¬¬äºŒè¡Œ
                    'ğŸ˜‰', 'ğŸ˜Š', 'ğŸ˜‹', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜˜', 'ğŸ˜—', 'ğŸ˜™',
                    // ç¬¬ä¸‰è¡Œ
                    'ğŸ˜š', 'ğŸ™‚', 'ğŸ¤—', 'ğŸ¤©', 'ğŸ¤”', 'ğŸ¤¨', 'ğŸ˜', 'ğŸ˜‘',
                    // ç¬¬å››è¡Œ
                    'ğŸ˜¶', 'ğŸ™„', 'ğŸ˜', 'ğŸ˜£', 'ğŸ˜¥', 'ğŸ˜®', 'ğŸ¤', 'ğŸ˜¯',
                    // ç¬¬äº”è¡Œ
                    'ğŸ˜ª', 'ğŸ˜«', 'ğŸ˜´', 'ğŸ˜Œ', 'ğŸ˜›', 'ğŸ˜œ', 'ğŸ˜', 'ğŸ¤¤',
                    // ç¬¬å…­è¡Œ
                    'ğŸ˜’', 'ğŸ˜“', 'ğŸ˜”', 'ğŸ˜•', 'ğŸ™ƒ', 'ğŸ¤‘', 'ğŸ˜²', 'â˜¹ï¸',
                    // ç¬¬ä¸ƒè¡Œ
                    'ğŸ™', 'ğŸ˜–', 'ğŸ˜', 'ğŸ˜Ÿ', 'ğŸ˜¤', 'ğŸ˜¢', 'ğŸ˜­', 'ğŸ˜¦',
                    // ç¬¬å…«è¡Œ
                    'ğŸ˜§', 'ğŸ˜¨', 'ğŸ˜©', 'ğŸ¤¯', 'ğŸ˜¬', 'ğŸ˜°', 'ğŸ˜±', 'ğŸ¥µ',
                    // ç¬¬ä¹è¡Œ
                    'ğŸ¥¶', 'ğŸ˜³', 'ğŸ¤ª', 'ğŸ˜µ', 'ğŸ˜¡', 'ğŸ˜ ', 'ğŸ¤¬', 'ğŸ˜·',
                    // ç¬¬åè¡Œ
                    'ğŸ¤’', 'ğŸ¤•', 'ğŸ¤¢', 'ğŸ¤®', 'ğŸ¤§', 'ğŸ˜‡', 'ğŸ¤ ', 'ğŸ¤¡',
                    // ç¬¬åä¸€è¡Œ
                    'ğŸ¥³', 'ğŸ¥´', 'ğŸ¥º', 'ğŸ¤¥', 'ğŸ¤«', 'ğŸ¤­', 'ğŸ§', 'ğŸ¤“'
                ],
                'äºº': [
                    // ç¬¬ä¸€è¡Œ - æ‰‹åŠ¿
                    'ğŸ‘‹', 'ğŸ¤š', 'âœ‹', 'ğŸ–ï¸', 'ğŸ‘Œ', 'ğŸ‘Š', 'ğŸ¤', 'âœŒï¸',
                    // ç¬¬äºŒè¡Œ - æ‰‹åŠ¿
                    'ğŸ¤', 'âœŒï¸', 'ğŸ¤Ÿ', 'ğŸ¤˜', 'ğŸ¤™', 'ğŸ‘ˆ', 'ğŸ‘‰', 'ğŸ‘†',
                    // ç¬¬ä¸‰è¡Œ - æ‰‹åŠ¿
                    'ğŸ–•', 'ğŸ‘‡', 'â˜ï¸', 'ğŸ‘', 'ğŸ‘', 'âœŠ', 'ğŸ‘Š', 'ğŸ¤›',
                    // ç¬¬å››è¡Œ - æ‰‹åŠ¿å’Œèº«ä½“éƒ¨ä½
                    'ğŸ¤œ', 'ğŸ‘', 'ğŸ™Œ', 'ğŸ‘', 'ğŸ¤²', 'ğŸ¤', 'ğŸ™', 'âœï¸',
                    // ç¬¬äº”è¡Œ - èº«ä½“éƒ¨ä½
                    'ğŸ’ª', 'ğŸ¦¾', 'ğŸ¦¿', 'ğŸ¦µ', 'ğŸ¦¶', 'ğŸ‘‚', 'ğŸ¦»', 'ğŸ‘ƒ',
                    // ç¬¬å…­è¡Œ - äººç‰©
                    'ğŸ‘¶', 'ğŸ‘§', 'ğŸ§’', 'ğŸ‘¦', 'ğŸ‘©', 'ğŸ§‘', 'ğŸ‘¨', 'ğŸ‘±â€â™€ï¸',
                    // ç¬¬ä¸ƒè¡Œ - äººç‰©
                    'ğŸ‘±', 'ğŸ‘±â€â™‚ï¸', 'ğŸ‘´', 'ğŸ‘µ', 'ğŸ§“', 'ğŸ™â€â™€ï¸', 'ğŸ™', 'ğŸ™â€â™‚ï¸',
                    // ç¬¬å…«è¡Œ - äººç‰©åŠ¨ä½œ
                    'ğŸ™â€â™€ï¸', 'ğŸ™', 'ğŸ™â€â™‚ï¸', 'ğŸ™…â€â™€ï¸', 'ğŸ™…', 'ğŸ™…â€â™‚ï¸', 'ğŸ™†â€â™€ï¸', 'ğŸ™†',
                    // ï¿½ï¿½ä¹è¡Œ - äººç‰©åŠ¨ä½œ
                    'ğŸ™†â€â™‚ï¸', 'ğŸ’â€â™€ï¸', 'ğŸ’', 'ğŸ’â€â™‚ï¸', 'ğŸ™‹â€â™€ï¸', 'ğŸ™‹', 'ğŸ™‹â€â™‚ï¸', 'ğŸ§â€â™€ï¸',
                    // ç¬¬åè¡Œ - äººç‰©åŠ¨ä½œ
                    'ğŸ§', 'ğŸ§â€â™‚ï¸', 'ğŸ™‡â€â™€ï¸', 'ğŸ™‡', 'ğŸ™‡â€â™‚ï¸', 'ğŸ¤¦â€â™€ï¸', 'ğŸ¤¦', 'ğŸ¤¦â€â™‚ï¸',
                    // ç¬¬åä¸€è¡Œ - äººç‰©åŠ¨ä½œ
                    'ğŸ¤·â€â™€ï¸', 'ğŸ¤·', 'ğŸ¤·â€â™‚ï¸', 'ğŸ‘¨â€âš•ï¸', 'ğŸ‘©â€âš•ï¸', 'ğŸ‘¨â€ğŸ“', 'ğŸ‘©â€ğŸ“', 'ğŸ‘¨â€ğŸ«',
                    // ç¬¬åäºŒè¡Œ - èŒä¸š
                    'ğŸ‘©â€ğŸ«', 'ğŸ‘¨â€âš–ï¸', 'ğŸ‘©â€âš–ï¸', 'ğŸ‘¨â€ğŸŒ¾', 'ğŸ‘©â€ğŸŒ¾', 'ğŸ‘¨â€ğŸ³', 'ğŸ‘©â€ğŸ³', 'ğŸ‘¨â€ğŸ”§',
                    // ç¬¬åä¸‰è¡Œ - èŒä¸š
                    'ğŸ‘©â€ğŸ”§', 'ğŸ‘¨â€ğŸ­', 'ğŸ‘©â€ğŸ­', 'ğŸ‘¨â€ğŸ’¼', 'ğŸ‘©â€', 'ğŸ‘¨â€ğŸ”¬', 'ğŸ‘©â€ğŸ”¬', 'ğŸ‘¨â€ğŸ’»',
                    // ç¬¬åå››è¡Œ - èŒä¸šå’Œå…¶ä»–
                    'ğŸ‘©â€ğŸ’»', 'ğŸ‘¨â€ğŸ¤', 'ğŸ‘©â€ğŸ¤', 'ğŸ‘¨â€ğŸ¨', 'ğŸ‘©â€ğŸ¨', 'ğŸ‘¨â€âœˆï¸', 'ğŸ‘©â€âœˆï¸', 'ğŸ‘®'
                ],
                'å¼€å¿ƒ': [
                    '(*^â–½^*)',     '(â—•â€¿â—•)',       '(ï½¡â™¥â€¿â™¥ï½¡)',
                    'ãƒ½(Â´â–½`)/',    '(ï¼¾â–½ï¼¾)',      '(â— â€¿â— )',
                    'ãƒ½(â™¡â€¿â™¡)ãƒ',   '(ï½€ãƒ»Ï‰ãƒ»Â´)',   '(Â´ï½¡â€¢ áµ• â€¢ï½¡`)',
                    '( Â´ â–½ ` )ï¾‰',  'ãƒ½(>âˆ€<â˜†)ãƒ',  'ï¼¼(ï¿£â–½ï¿£)ï¼',
                    '(ï¾‰Â´ãƒ®`)ï¾‰*',    '(â‰§âˆ€â‰¦)',       'o(ã€ƒï¼¾â–½ï¼¾ã€ƒ)o',
                    '(ï½€ï½¥Ï‰ï½¥Â´)ã‚',   '(Â´ï½¥á´—ï½¥`)',     '(Â´â—¡`â)',
                    '(à¹‘Ëƒá´—Ë‚)ï»­',     'o((*^â–½^*))o',  '(â—â€¢á´—â€¢â—)',
                    '(ï¾‰â—•ãƒ®â—•)ï¾‰*',    'ãƒ½(oï¼¾â–½ï¼¾o)ãƒ', 'Ù©(â—•â€¿â—•ï½¡)Û¶',
                    '(ã€ƒï¿£ï¸¶ï¿£)äºº',   '(ï¾Ÿâˆ€ï¾Ÿ)',      '(oÂ´âˆ€`o)',
                    '(à¹‘Â¯âˆ€Â¯à¹‘)',     '(*Â´âˆ€`*)',     '(ï½¡Â´âˆ€ï½€)ï¾‰',
                    '(â—Â´âˆ€`â—)',     'ãƒ½(ï½¥âˆ€ï½¥)ï¾‰',    'o(^â–½^)o',
                    'ãƒ½(ï½¡â—•â€¿â—•ï½¡)ï¾‰',   '(ï½€ï½¥ã‰¨ï½¥Â´)',    '(â—Â´Ï‰ï½€â—)',
                    '(*â‰§Ï‰â‰¦*)',     '(â—•â€¿â—•âœ¿)',      '(Â´ï½¥Ï‰ï½¥`)',
                    '(âŒ’â€¿âŒ’)',       '(*^â€¿^*)',      '(â— ï¹â— )',
                    '(âœ¿â— â€¿â— )',      '(â—¡â€¿â—¡âœ¿)',      '(âœ¿â•¹â—¡â•¹)',
                    '(â—•á´—â—•âœ¿)',      '(ï¾‰â—•ãƒ®â—•)ï¾‰*:ï½¥ï¾Ÿâœ§', '(â€â€¢ ÖŠ â€¢â€)',
                    '(ï½¡â™¥â€¿â™¥ï½¡)',     '(âœ¿ â™¥â€¿â™¥)',     '(â—â€¢á´—â€¢â—)â¤'
                ],
                'é—®å€™': [
                    '(ï½¡ï½¥âˆ€ï½¥)ï¾‰ï¾',      'ãƒ¾(ãƒ»Ï‰ãƒ»*)',     '(*Â´âˆ€`)~â™¥',
                    '(ï½€ï½¥Ï‰ï½¥Â´)ã‚',     'ãƒ¾(^â–½^*)))',    '(ã€‚ãƒ»Ï‰ãƒ»)ãƒ',
                    '(â‰§âˆ€â‰¦)ã‚',       '(â—Â´âˆ€ï½€â—)ï¾‰',     'ãƒ¾(â—ã‚œâ–½ã‚œâ—)',
                    '(*Â´ãƒ»ï½–ãƒ»)',     '(ï½€ãƒ»Ï‰ãƒ»Â´)',    'ãƒ¾(^â–½^ãƒ¾)',
                    '(ã€ƒï½¥Ï‰ï½¥)ï¾‰~â˜†',    'ãƒ½(*ãƒ»Ï‰ãƒ»)ï¾‰',    '(oï½¥Ï‰ï½¥o)ï¾‰',
                    'ãƒ¾(ï½¥Ï‰ï½¥`ï½¡)',     '(ï½€ï½¥âˆ€ï½¥Â´)ã‚',     'ãƒ¾(ï½¥âˆ€ï½¥`)ï¾‰',
                    '(Â´ï½¥omegaï½¥ï½€)',   'ãƒ½(ï½¥âˆ€ï½¥)ï¾‰',      'ãƒ¾(ï½¥Ï‰ï½¥`â—)ï¾‰'
                ],
                'å–èŒ': [
                    '(ï½¡â—•â€¿â—•ï½¡)',      '(â—•Ï‰â—•)',        '(â—ã‚Ï‰ãƒ»)',
                    '(âŒ’)â™¡',      '(ï½¡â™¥â€¿â™¥ï½¡)',      '(â—•â€¿â—•âœ¿)',
                    '(â— â€¿â— )',       '(â—¡â€¿â—¡âœ¿)',      '(âœ¿â— â€¿â— )',
                    '(â—•á´—â—•âœ¿)',      '(â—•â€¿â—•)',        '(ï½¡â—•â€¿â—•ï½¡)',
                    '(â—Â´Ï‰ï½€â—)',     '(â—•â€¿â—•âœ¿)',       '(â— Ï‰â— âœ¿)',
                    '(â—•â–³â—•âœ¿)',      '(ï½¡â—•â€¿â—•ï½¡)',      '(â—Â´âˆ€ï½€â—)',
                    '(âœ¿Â´â€¿`)',      '(â— â€¿â— âœ¿)',      '(â—•â€¿â—•âœ¿)'
                ],
                'å¿§ä¼¤': [
                    '(Â´;Ï‰;ï½€)',      '(ï¹â•¥)',        '(;Â´Ğ´ï½€)',
                    '(Â´ï¼›Ï‰ï¼›ï½€)',     '(ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)',     '(ï½¡Åï¹Å)',
                    '(ã£Ë˜Ì©â•­â•®Ë˜Ì©)ã£',   '(ï½¡Åï¹Å)',       '(Â´;ï¸µ;`)',
                    '(ï½¡â•¯ï¸µâ•°ï½¡)',      '(â•¥_â•¥)',         '(ã£- â€¸ â€“ Ï‚)',
                    '(Â´;Ï‰;ï½€)',      '(ï½¡áµ•ï¸µáµ•ï½¡)',      '(ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)',
                    '(à¹‘â—•ï¸µâ—•à¹‘)',      '(Â´;Ğ´;`)',       '(ã¤ï¹<ã€‚)',
                    '(ï½¡Å_Å)',       '(ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)',     '(â‹Ÿï¹â‹)'
                ],
                'ç”Ÿæ°”': [
                    '(ï½€çš¿Â´ï¼ƒ)',      '(â•¬ï¾ŸĞ´ï¾Ÿ)',       '(â•¬`ç›ŠÂ´)',
                    '(â€¡â–¼ç›Šâ–¼)',      '(â•¬ Ã’ï¹Ã“)',      '(ï¼ƒ`Ğ”Â´)',
                    '(â—ï½€ÎµÂ´â—)',      '(â—â€¸â—Ÿï¼›)',      'ãƒ½(ï½€âŒ’Â´ãƒ¡)ãƒ',
                    '(ï½€Ğ”Â´*)',       '(ï¼ƒï½€Ğ´Â´)ï¾‰',     '(ï½¥ï½€Â´ï½¥)',
                    '(ï½€ÎµÂ´)',        '(ï½€Ğ”Â´)',        'Ïˆ(ï½€âˆ‡Â´)Ïˆ',
                    '(ãƒï½€Ğ”Â´)ãƒ',     '(â•¬ï½€ç›ŠÂ´)',      '(ï½€Ï‰Â´)',
                    '(ï½€â—‡Â´)',        '(ï½€ãƒ¼Â´)',       '(ï¾’ï½€ï¾›Â´)/'
                ],
                'æ— è¯­': [
                    '(ï¿£â–½ï¿£*)ã‚',    '(-_-;)ãƒ»ãƒ»ãƒ»',    '(ï¿£ï½ï¿£;)',
                    '(ï¼›ä¸€_ä¸€)',      '(Â¬_Â¬)',         '(â†_â†)',
                    '(ï¼›Â¬_Â¬)',       '(ï¿£ï½ï¿£)',       '(-_-ãƒ¡)',
                    '(-_-;)ã‚',      '(ï¼›-_-)',       '(ï½€_Â´)ã‚',
                    '(ï¿£Ï‰ï¿£;)',      '(ï¿£â–¡ï¿£ã€)',     '(ï¼ƒï¿£Ï‰ï¿£)',
                    '(ï¿£â€ï¿£)',       '(ï¼ƒï¿£ï½ï¿£ï¼ƒ)',   '(ï¼›ï¿£Ğ”ï¿£)',
                    '(ï¿£ï½ï¿£)',      '(ãƒ¼ï¿£)',       '(ãƒ¼_ãƒ¼)!!'
                ],
                'æƒŠè®¶': [
                    '(âŠ™_âŠ™)',        '(âŠ™oâŠ™)',        'w(ï¾ŸĞ”ï¾Ÿ)w',
                    '(Â´âŠ™Ï‰âŠ™`)',      '(ï½€ãƒ»Ï‰ãƒ»Â´)',     '(Â°ãƒ¼Â°ã€ƒ)',
                    'Î£(ã‚œãƒ­ã‚œ;)',    '(âŠ™_âŠ™;)',       '(;Â°Ğ”Â°)',
                    '(ã€‚â–¡ã€‚)',       '(ï¾ŸĞ´ï¾Ÿï¼›)',      '(ã‚œ-ã‚œ)',
                    '(â—_â—;)',       '(â—__â—)',       '(ï¾Ÿâ–¡ï¾Ÿ*)',
                    '(ï¾Ÿã€‡ï¾Ÿ)',       '(ï¾Ÿè‰¸ï¾Ÿ;)',      '(;ï¾ŸĞ´ï¾Ÿ)',
                    '(;ã‚œâ—‹ã‚œ)',      '(ï¼›ã‚œâ—‹ã‚œ)',     '(;ï¿¢_ï¿¢)'
                ],
                'å•ä½': [
                    'Â°', 'â„ƒ', 'â„‰', 'ã', 'ã', 'ãœ', 'ã', 'ã',
                    'ã¡', 'ã¥', 'ã¦', 'ã›', 'ãŸ', 'ã ', 'ã¤', 'ãª',
                    'ã«', 'ã­', 'ã®', 'ã¯', 'ã°', 'ã±', 'ã²', 'ã³',
                    'ã´', 'ãµ', 'ã¶', 'ã·', 'ã¸', 'ã¹', 'ãº', 'ã„',
                    'ã', 'ã‘', 'ã’', 'ã•', 'â€°', 'ï¼…', 'â€±', 'â„®'
                ],
                'åºå·': [
                    'â‘ ', 'â‘¡', 'â‘¢', 'â‘£', 'â‘¤', 'â‘¥', 'â‘¦', 'â‘§',
                    'â‘¨', 'â‘©', 'â‘ª', 'â‘«', 'â‘¬', 'â‘­', 'â‘®', 'â‘¯',
                    'â… ', 'â…¡', 'â…¢', 'â…£', 'â…¤', 'â…¥', 'â…¦', 'â…§',
                    'â…¨', 'â…©', 'â…ª', 'â…«', 'â’ˆ', 'â’‰', 'â’Š', 'â’‹',
                    'â’Œ', 'â’', 'â’', 'â’', 'â’', 'â’‘', 'â’’', 'â’“'
                ],
                'ç‰¹æ®Šç¬¦å·': [
                    'Â©', 'Â®', 'â„¢', 'â„ ', 'Â§', 'Â¶', 'â€ ', 'â€¡',
                    'â€»', 'â‚', 'â˜®', 'â˜¯', 'â˜ª', 'â˜­', 'â™¨', 'â˜¢',
                    'â˜£', 'â˜¤', 'âš•', 'âšœ', 'âš ', 'â˜”', 'â™¿', 'âš¡',
                    'â˜', 'âŒ›', 'â˜º', 'â˜¹', 'â™ ', 'â™¥', 'â™£', 'â™¦',
                    'âœ“', 'âœ”', 'âœ—', 'âœ˜', 'â™ª', 'â™«', 'â™¯', 'â™­'
                ],
                'æ ‡ç‚¹ç¬¦å·': [
                    'Â·', 'â€¥', 'â€¦', 'â€§', 'ï¹’', 'ï¼', 'ã€Œ', 'ã€',
                    'ã€', 'ã€', 'ã€”', 'ã€•', 'ã€', 'ã€‘', 'ã€Š', 'ã€‹',
                    'ã€ˆ', 'ã€‰', 'ï¹™', 'ï¹š', 'ï¹›', 'ï¹œ', 'ï¹', 'ï¹',
                    'ã€', 'ã€', 'â€µ', 'â€²', 'ã€ƒ', 'ï½', 'âˆ¥', 'ï¹‰',
                    'ï¹Š', 'ï¹‹', 'ï¹Œ', 'ï¹', 'ï¹', 'ï¹', 'ï¹', 'ï¹‘'
                ],
                'æ•°å­¦': [
                    'ï¼‹', 'ï¼', 'Ã—', 'Ã·', 'ï¼', 'â‰ ', 'â‰’', 'âˆ',
                    'Â±', 'âˆš', 'âˆµ', 'âˆ´', 'âˆ·', 'â‰¤', 'â‰¥', 'âˆ ',
                    'âŠ¥', 'âˆª', 'âˆ©', 'âˆˆ', 'âˆ‘', 'âˆ', 'âˆ…', 'Ï€',
                    'Î”', 'Î¦', 'Î¨', 'Î©', 'âˆ«', 'âˆ®', 'âˆ', 'âˆŸ',
                    'âˆ‡', 'âˆ†', 'âˆƒ', 'âˆ€', 'âˆ‚', 'âˆ‡', 'â‰¡', 'â‰Œ'
                ],
                'å‡ ä½•': [
                    'â–³', 'â–²', 'â–½', 'ï¿½ï¿½', 'â—‡', 'â—†', 'â—‹', 'â—',
                    'â–¡', 'â– ', 'â–¢', 'â–£', 'â–¤', 'â–¥', 'â–¦', 'â–§',
                    'â–¨', 'â–©', 'â–ª', 'â–«', 'â–¬', 'â–­', 'â–®', 'â–¯',
                    'â–°', 'â–±', 'â–²', 'â–¶', 'â–¼', 'â—€', 'â—¢', 'â—£',
                    'â—¤', 'â—¥', 'â—', 'â—‘', 'â—’', 'â—“', 'â—”', 'â—•'
                ],
                'å­—æ¯': [
                    'Î±', 'Î²', 'Î³', 'Î´', 'Îµ', 'Î¶', 'Î·', 'Î¸',
                    'Î¹', 'Îº', 'Î»', 'Î¼', 'Î½', 'Î¾', 'Î¿', 'Ï€',
                    'Ï', 'Ïƒ', 'Ï„', 'Ï…', 'Ï†', 'Ï‡', 'Ïˆ', 'Ï‰',
                    'Î‘', 'Î’', 'Î“', 'Î”', 'Î•', 'Î–', 'Î—', 'Î˜',
                    'Î™', 'Îš', 'Î›', 'Îœ', 'Î', 'Î', 'ÎŸ', 'Î '
                ],
                'åº†ç¥å’Œç‰©å“': [
                    // åº†ç¥ç›¸å…³
                    'ğŸˆ', 'ğŸ†', '', 'âœ¨', 'ğŸ‰', 'ğŸŠ', 'ğŸ‹', 'ğŸ',
                    'ğŸ', 'ğŸ', 'ğŸ', 'ğŸ‘', 'ğŸ€', 'ğŸ', 'ğŸ—', 'ğŸŸ',
                    // æ´»åŠ¨å’Œå¨±ä¹
                    'ğŸ«', 'ğŸ–', 'ğŸ†', 'ğŸ…', 'ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰', 'âš½',
                    'âš¾', 'ğŸ€', 'ğŸ', 'ğŸˆ', 'ğŸ‰', 'ğŸ¾', 'ğŸ±', 'ğŸ³',
                    // ç‰©å“å’Œå·¥å…·
                    'ğŸ“±', 'ğŸ“²', 'ğŸ’»', 'âŒ¨', 'ğŸ–¥', 'ğŸ–¨', 'ğŸ–±', 'ğŸ–²',
                    'ğŸ’½', 'ğŸ’¾', 'ğŸ’¿', 'ğŸ“€', 'ğŸ¥', 'ğŸ', 'ğŸ“½', 'ğŸ¬',
                    // å…¶ä»–ç‰©å“
                    'ğŸ“º', 'ğŸ“·', 'ğŸ“¸', 'ğŸ“¹', 'ğŸ“¼', 'ğŸ”', 'ğŸ”', 'ğŸ”¬',
                    'ğŸ”­', 'ğŸ“¡', '', 'ğŸ’¡', 'ğŸ”¦', 'ğŸ®', 'ğŸ“”', 'ğŸ“•'
                ],
                'é£Ÿå“å’Œæ¤ç‰©': [
                    // æ°´æœ
                    'ğŸ', 'ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸŒ', 'ğŸ‰', 'ğŸ‡', 'ğŸ“',
                    'ğŸˆ', 'ğŸ’', 'ğŸ‘', 'ğŸ', 'ğŸ¥', 'ğŸ…', 'ğŸ¥¥', 'ğŸ¥‘',
                    // è”¬èœ
                    'ğŸ¥¦', 'ğŸ¥’', 'ğŸ¥¬', 'ğŸ¥•', 'ğŸŒ½', 'ğŸ¥—', 'ğŸ¥”', 'ğŸ ',
                    'ğŸ¥œ', 'ğŸŒ°', 'ğŸ¯', 'ğŸ¥', 'ğŸ¥–', 'ğŸ¥¨', 'ğŸ¥¯', 'ğŸ¥',
                    // ä¸»é£Ÿå’Œè‚‰ç±»
                    'ğŸ', 'ğŸ§€', 'ğŸ–', 'ğŸ—', 'ğŸ¥©', 'ğŸ¥“', 'ğŸ”', 'ğŸŸ',
                    'ğŸŒ­', '', 'ğŸ¥ª', 'ğŸŒ®', 'ğŸŒ¯', 'ğŸ¥™', 'ğŸ¥š', 'ğŸ³',
                    // ç”œç‚¹å’Œé¥®å“
                    'ğŸ¥˜', 'ğŸ²', 'ğŸ¥£', 'ğŸ¥—', 'ğŸ¿', 'ğŸ§‚', 'ğŸ¥«', 'ğŸ±',
                    'ğŸ˜', 'ğŸ™', 'ğŸš', 'ğŸ›', 'ğŸœ', 'ğŸ', 'ğŸ ', 'ğŸ¢',
                    // æ¤ç‰©
                    'ğŸŒ±', 'ğŸŒ²', 'ğŸŒ³', 'ğŸŒ´', 'ğŸŒµ', 'ğŸŒ¾', 'ğŸŒ¿', 'â˜˜',
                    'ğŸ€', 'ğŸ', 'ğŸ‹', 'ğŸƒ', 'ğŸ‚', 'ğŸ', 'ğŸ„', 'ğŸŒ¸'
                ],
                'äº¤é€šå’Œåœ°ç‚¹': [
                    // é™†åœ°äº¤é€š
                    'ğŸš—', 'ğŸš•', 'ğŸš™', 'ğŸšŒ', 'ğŸš', 'ğŸ', 'ğŸš“', 'ğŸš‘',
                    'ğŸš’', 'ğŸš', 'ğŸšš', 'ğŸš›', 'ğŸšœ', 'ğŸš²', 'ğŸ›´', 'ğŸ›µ',
                    // é“è·¯äº¤é€š
                    'ğŸš‚', 'ğŸšƒ', 'ğŸš„', 'ğŸš…', 'ğŸš†', 'ğŸš‡', 'ğŸšˆ', 'ğŸš‰',
                    'ğŸšŠ', 'ğŸš', 'ğŸš', 'ğŸš‹', 'ğŸšŒ', 'ğŸš', 'ğŸš', 'ğŸš',
                    // ç©ºä¸­äº¤é€š
                    'âœˆ', 'ğŸ›©', 'ğŸ›«', 'ğŸ›¬', 'ğŸš', 'ğŸšŸ', 'ğŸš ', 'ğŸš¡',
                    'ğŸ›°', 'ğŸš€', 'ğŸ›¸', 'ğŸ’º', 'ğŸ›¶', 'â›µ', 'ğŸ›¥', 'ğŸš¤',
                    // åœ°ç‚¹å’Œå»ºç­‘
                    'ğŸ ', 'ğŸ¡', 'ğŸ¢', 'ğŸ£', 'ğŸ¤', 'ğŸ¥', 'ğŸ¦', 'ğŸ¨',
                    'ğŸ©', 'ğŸª', 'ğŸ«', 'ğŸ¬', 'ğŸ­', 'ğŸ¯', 'ğŸ°', 'ğŸ’’'
                ],
                'çˆ±å¿ƒ': [
                    // ç¬¬ä¸€è¡Œ - å½©è‰²å¿ƒå½¢
                    'â¤ï¸', 'ğŸ§¡', 'ğŸ’›', 'ğŸ’š', 'ğŸ’™', 'ğŸ’œ', 'ğŸ¤', 'ğŸ–¤',
                    // ç¬¬äºŒè¡Œ - ç™½è‰²å’Œç‰¹æ®Šå¿ƒå½¢
                    'ğŸ¤', 'â¤ï¸â€ğŸ”¥', 'â¤ï¸â€ğŸ©¹', 'ğŸ’', 'ğŸ’–', 'ğŸ’—', 'ğŸ’“', 'ğŸ’',
                    // ç¬¬ä¸‰è¡Œ - è£…é¥°å¿ƒå½¢
                    'ğŸ’•', 'ğŸ’Ÿ', 'â£ï¸', 'ğŸ’”', 'â™¥ï¸', 'â™¡', 'â¥', 'â³â¤ï¸',
                    // ç¬¬å››è¡Œ - è®¾æ–½å›¾æ ‡
                    'ğŸš¾', 'ğŸ…¿ï¸', 'ğŸš°', 'ğŸš¹', 'ğŸšº', 'ğŸš»', 'ğŸš®', 'ğŸ“Š',
                    // ç¬¬äº”è¡Œ - æ–‡å­—å›¾æ ‡
                    'ğŸˆ', 'ğŸˆ²', 'ğŸ†—', 'ğŸ†™', 'ğŸ†’', 'ğŸ†•', 'ğŸ†“', '#ï¸âƒ£',
                    // ç¬¬å…­è¡Œ - æ•°å­— 0-6
                    '*ï¸âƒ£', '0ï¸âƒ£', '1ï¸âƒ£', '2ï¸âƒ£', '3ï¸âƒ£', '4ï¸âƒ£', '5ï¸âƒ£', '6ï¸âƒ£',
                    // ç¬¬ä¸ƒè¡Œ - æ•°å­— 7-9 å’Œæ§åˆ¶
                    '7ï¸âƒ£', '8ï¸âƒ£', '9ï¸âƒ£', 'ğŸ”Ÿ', 'ğŸ”¢', 'â–¶ï¸', 'â¸ï¸', 'â­ï¸',
                    // ç¬¬å…«è¡Œ - æ’­æ”¾æ§åˆ¶
                    'â¹', 'âº', 'â©', 'âª', 'â«', 'â¬', 'ğŸ”€', 'ğŸ”',
                    // ç¬¬ä¹è¡Œ - æ§åˆ¶å’Œç¬¦å·
                    'âœ“', 'â†', 'â†', 'ã€œ', 'ğŸ‘', 'âœ“', '$', 'â†»',
                    // ç¬¬åè¡Œ - æ•°å­¦ç¬¦å·
                    '+', '-', 'Ã—', 'Ã·', 'Â©', 'Â®', 'â„¢', 'â—¯',
                    // ç¬¬åä¸€è¡Œ - å½©è‰²åœ†å½¢
                    'ğŸ”´', 'ğŸŸ ', 'ğŸŸ¡', 'ğŸŸ¢', 'ğŸ”µ', 'ğŸŸ£', 'ğŸŸ¤', 'âš«',
                    // ç¬¬åäºŒè¡Œ - å½©è‰²æ–¹å½¢
                    'â¬œ', 'ğŸŸ¥', 'ğŸŸ§', 'ğŸŸ¨', 'ğŸŸ©', 'ğŸŸ¦', 'ğŸŸª', 'ğŸŸ«',
                    // ç¬¬åä¸‰è¡Œ - é»‘è‰²æ–¹å½¢(ç”±å¤§åˆ°å°)
                    'â¬›', 'â¬œ', 'â—¾', 'â—½', 'â–ªï¸', 'â–«ï¸', 'ï¿½ï¿½ï¸', 'â–«ï¸',
                    // ç¬¬åå››è¡Œ - å®—æ•™å’Œå’Œå¹³ç¬¦å·
                    'â˜®', 'âœ', 'â˜ª', 'ğŸ•‰', 'â˜¸', 'âœ¡', 'â˜¯', 'âœ´',
                    // ç¬¬åäº”è¡Œ - æŒ‡ç¤ºç¬¦å·
                    'ğŸ’ ', 'ğŸ”·', 'âœ³', 'âœ´', 'âŒ', 'âœ…', 'ğŸ’«', 'ğŸŒ',
                    // ç¬¬åå…­è¡Œ - æ±‰å­—ç¬¦å·
                    'å‰²', 'æœ‰', 'ç„¡', 'ç”³', 'å–¶', 'æœˆ', 'âœ´', 'VS',
                    // æ–°å¢æ—¶é’Ÿç³»åˆ— - ç¬¬ä¸€è¡Œ
                    'ğŸ•', 'ğŸ•‘', 'ğŸ•’', 'ğŸ•“', 'ğŸ•”', 'ğŸ••', 'ğŸ•–', 'ğŸ•—',
                    // æ—¶é’Ÿç³»åˆ— - ç¬¬äºŒè¡Œ
                    'ğŸ•˜', 'ğŸ•™', 'ğŸ•š', 'ğŸ•›', 'ğŸ•œ', 'ğŸ•', 'ğŸ•', 'ğŸ•Ÿ',
                    // æ—¶é’Ÿç³»åˆ— - ç¬¬ä¸‰è¡Œ
                    'ğŸ• ', 'ğŸ•¡', 'ğŸ•¢', 'ğŸ•£', 'ğŸ•¤', 'ğŸ•¥', 'ğŸ•¦', 'ğŸ•§',
                    // å¯¹è¯æ¡†ç³»åˆ—
                    'ğŸ’­', 'ğŸ—¨ï¸', 'ğŸ’¬', 'ğŸ—¯ï¸', 'ğŸ‘ï¸', 'â°', 'âŒš', 'â±ï¸'
                ]
            };
        }

        init() {
            this.currentPrimaryTab = 'ğŸ˜Š';
            this.currentSecondaryTab = EmojiPicker.CATEGORIES['ğŸ˜Š'][1];
            
            this.createPickerElement();
            this.bindEvents();
        }

        createPickerElement() {
            // åˆ›å»ºé€‰æ‹©å™¨HTMLç»“æ„
            const pickerHtml = `
                <div class="emoji-picker">
                    <div class="picker-header">
                        <span class="picker-title">è¡¨æƒ…ç¬¦å·</span>
                        <button class="close-btn">âœ•</button>
                    </div>
                    <div class="primary-tabs">
                        <button class="primary-tab active">ğŸ˜Š</button>
                        <button class="primary-tab">;-)</button>
                        <button class="primary-tab">Î©</button>
                    </div>
                    <div class="emoji-content"></div>
                    <div class="secondary-tabs"></div>
                </div>
            `;

            this.$picker = $(pickerHtml);
            $('body').append(this.$picker);
            this.initializePicker();
        }

        bindEvents() {
            // ç»‘å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            $(this.element).on('click', (e) => {
                e.stopPropagation();
                this.toggle();
            });

            // ç»‘å®šå…³é—­æŒ‰é’®äº‹ä»¶
            this.$picker.find('.close-btn').on('click', () => this.hide());

            // ç»‘å®šä¸€çº§åˆ†ç±»ç‚¹å‡»äº‹ä»¶
            this.$picker.find('.primary-tab').on('click', (e) => this.onPrimaryTabClick(e));

            // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­
            $(document).on('click', (e) => {
                if (!$(e.target).closest('.emoji-picker').length) {
                    this.hide();
                }
            });
        }

        // å…¶ä»–æ–¹æ³•...
        initializePicker() {
            this.$picker.find('.picker-title').text(EmojiPicker.TAB_MAPPING[this.currentPrimaryTab]);
            this.updateSecondaryTabs();
            this.updateEmojiContent();
        }

        toggle() {
            if (!this.$picker.is(':visible')) {
                this.show();
            } else {
                this.hide();
            }
        }

        show() {
            this.currentPrimaryTab = 'ğŸ˜Š';
            this.currentSecondaryTab = EmojiPicker.CATEGORIES['ğŸ˜Š'][1];
            
            this.$picker.find('.primary-tab').removeClass('active')
                       .first().addClass('active');
            
            this.initializePicker();
            this.updatePosition();
            this.$picker.show();
        }

        hide() {
            this.$picker.hide();
        }

        updatePosition() {
            const $input = $(this.settings.inputTarget);
            if (!$input.length) return;

            // è·å–è¾“å…¥æ¡†çš„ä½ç½®å’Œå°ºå¯¸ä¿¡æ¯
            const inputPos = $input.offset();
            const inputScrollTop = $input.scrollTop();
            const lineHeight = parseInt($input.css('lineHeight'));
            
            // è·å–å…‰æ ‡ä½ç½®ä¿¡æ¯
            const cursorPosition = $input[0].selectionStart;
            const text = $input.val();
            const textBeforeCursor = text.substring(0, cursorPosition);
            
            // è®¡ç®—å…‰æ ‡æ‰€åœ¨è¡Œ
            const lines = textBeforeCursor.split('\n');
            const currentLineNumber = lines.length - 1;
            const currentLineTop = currentLineNumber * lineHeight;
            
            // åˆ›å»ºä¸´æ—¶å…ƒç´ æ¥è®¡ç®—å½“å‰è¡Œå…‰æ ‡çš„æ°´å¹³ä½ç½®
            const currentLine = lines[lines.length - 1];
            const $temp = $('<span>').css({
                position: 'absolute',
                visibility: 'hidden',
                whiteSpace: 'pre',
                font: $input.css('font'),
                fontSize: $input.css('fontSize'),
                letterSpacing: $input.css('letterSpacing')
            }).text(currentLine);
            
            $('body').append($temp);
            const cursorOffset = $temp.width();
            $temp.remove();
            
            // è®¡ç®—è¡¨æƒ…é€‰æ‹©å™¨çš„ä½ç½®
            const pickerWidth = this.$picker.outerWidth();
            let left = inputPos.left + cursorOffset + parseInt($input.css('paddingLeft'));
            let top = inputPos.top + currentLineTop - inputScrollTop + lineHeight + parseInt($input.css('paddingTop'));
            
            // ç¡®ä¿é€‰æ‹©å™¨ä¸ä¼šè¶…å‡ºçª—å£å³è¾¹ç•Œ
            const windowWidth = $(window).width();
            if (left + pickerWidth > windowWidth) {
                left = windowWidth - pickerWidth - 10;
            }
            
            // ç¡®ä¿é€‰æ‹©å™¨ä¸ä¼šè¶…å‡ºçª—å£å·¦è¾¹ç•Œ
            if (left < 0) {
                left = 10;
            }
            
            // å¦‚æœé€‰æ‹©å™¨ä¼šè¶…å‡ºçª—å£åº•éƒ¨ï¼Œåˆ™æ˜¾ç¤ºåœ¨å…‰æ ‡ä¸Šæ–¹
            const pickerHeight = this.$picker.outerHeight();
            const windowHeight = $(window).height();
            if (top + pickerHeight > windowHeight) {
                top = top - pickerHeight - lineHeight;
            }
            
            this.$picker.css({
                top: top,
                left: left
            });
        }

        // æ·»åŠ ç¼ºå¤±çš„æ–¹æ³•
        onPrimaryTabClick(e) {
            const $tab = $(e.currentTarget);
            this.currentPrimaryTab = $tab.text();
            
            this.$picker.find('.primary-tab').removeClass('active');
            $tab.addClass('active');
            
            this.$picker.find('.picker-title').text(EmojiPicker.TAB_MAPPING[this.currentPrimaryTab]);
            this.currentSecondaryTab = EmojiPicker.CATEGORIES[this.currentPrimaryTab][1];
            
            this.updateSecondaryTabs();
            this.updateEmojiContent();
        }

        updateSecondaryTabs() {
            const secondaryTabs = EmojiPicker.CATEGORIES[this.currentPrimaryTab];
            const $secondaryTabs = this.$picker.find('.secondary-tabs');
            $secondaryTabs.empty();
            
            secondaryTabs.forEach(tab => {
                const isActive = tab === this.currentSecondaryTab ? 'active' : '';
                $secondaryTabs.append(
                    `<button class="secondary-tab ${isActive}" title="${EmojiPicker.SECONDARY_TAB_MAPPING[tab]}">${tab}</button>`
                );
            });

            // äºŒçº§åˆ†ç±»æ ‡ç­¾ç‚¹å‡»äº‹ä»¶
            this.$picker.find('.secondary-tab').on('click', (e) => {
                const $tab = $(e.currentTarget);
                this.$picker.find('.secondary-tab').removeClass('active');
                $tab.addClass('active');
                this.currentSecondaryTab = $tab.text();
                this.updateEmojiContent();
            });
        }

        updateEmojiContent() {
            const $content = this.$picker.find('.emoji-content');
            $content.empty();
            
            // ç§»é™¤ä¹‹å‰çš„é¢å¤–ç±»å
            $content.removeClass('kaomoji-content symbol-content');

            const categoryName = EmojiPicker.SECONDARY_TAB_MAPPING[this.currentSecondaryTab];
            
            // åˆ¤æ–­å½“å‰åˆ†ç±»ç±»å‹
            const isKaomoji = this.currentPrimaryTab === ';-)';
            const isSymbol = this.currentPrimaryTab === 'Î©';
            
            // æ ¹æ®å½“å‰ä¸€çº§tabæ·»åŠ å¯¹åº”çš„å†…å®¹æ ·å¼ç±»
            if (isKaomoji) {
                $content.addClass('kaomoji-content');
            } else if (isSymbol) {
                $content.addClass('symbol-content');
            }

            if (categoryName === 'æœ€è¿‘ä½¿ç”¨') {
                // ä½¿ç”¨å½“å‰ä¸€çº§tabå¯¹åº”çš„æœ€è¿‘ä½¿ç”¨è®°å½•
                Array.from(this.recentEmojis[this.currentPrimaryTab]).forEach(emoji => {
                    let className = 'emoji-item';
                    if (isKaomoji) {
                        className = 'kaomoji-item';
                    } else if (isSymbol) {
                        className = 'symbol-item';
                    }
                    $content.append(this.createEmojiElement(emoji, className));
                });
                return;
            }

            const emojis = EmojiPicker.EMOJI_DATA[categoryName] || [];
            
            emojis.forEach(emoji => {
                let className = 'emoji-item';
                if (isKaomoji) {
                    className = 'kaomoji-item';
                } else if (isSymbol) {
                    className = 'symbol-item';
                }
                
                const $element = this.createEmojiElement(emoji, className);
                $content.append($element);
            });
        }

        createEmojiElement(emoji, className = 'emoji-item') {
            const $emoji = $(`<span class="${className}" title="ç‚¹å‡»æ’å…¥è¡¨æƒ…">${emoji}</span>`);
            
            $emoji.on('click', () => {
                this.insertEmoji(emoji);
            });
            
            return $emoji;
        }

        insertEmoji(emoji) {
            if (this.settings.inputTarget) {
                const $input = $(this.settings.inputTarget);
                const pos = $input[0].selectionStart;
                const text = $input.val();
                
                $input.val(text.slice(0, pos) + emoji + text.slice(pos));
                $input[0].setSelectionRange(pos + emoji.length, pos + emoji.length);
                $input.focus();
            }

            // æ·»åŠ åˆ°å½“å‰ä¸€çº§tabçš„æœ€è¿‘ä½¿ç”¨è®°å½•ä¸­
            this.recentEmojis[this.currentPrimaryTab].add(emoji);
            if (this.recentEmojis[this.currentPrimaryTab].size > 30) {
                this.recentEmojis[this.currentPrimaryTab].delete(
                    Array.from(this.recentEmojis[this.currentPrimaryTab])[0]
                );
            }

            // è§¦å‘é€‰æ‹©å›è°ƒ
            if (typeof this.settings.onSelect === 'function') {
                this.settings.onSelect(emoji);
            }
        }
    }

    // æ³¨å†Œä¸ºjQueryæ’ä»¶
    $.fn.emojiPicker = function(options) {
        return this.each(function() {
            if (!$.data(this, 'emojiPicker')) {
                $.data(this, 'emojiPicker', new EmojiPicker(this, options));
            }
        });
    };

})(jQuery); 
